<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Eska's Multiplayer Guessing Game</title>
<style>
:root {
    --bg-light: #e0e0e0;
    --text-light: #222;
    --metal-gradient: linear-gradient(145deg, #ffffff, #d1d1d1, #a0a0a0);
    --accent-gradient: linear-gradient(135deg, #ffd700, #ffa500);
    --correct: #4caf50;
    --wrong: #ff5722;
}
body {
    margin:0;
    font-family: 'Segoe UI', sans-serif;
    background-color: var(--bg-light);
    color: var(--text-light);
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 100vh;
}
header {
    text-align:center;
    padding:20px;
    background: var(--accent-gradient);
    color:#222;
    width:100%;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    border-bottom:2px solid #999;
}
h1 { margin:0; font-size:1.8rem; text-shadow: 1px 1px 2px #999; }
.container { padding:15px; width:95%; max-width:600px; }
.input-row { margin-top:10px; display:flex; flex-wrap:wrap; gap:10px; justify-content:center; }
input[type="number"], input[type="text"], select {
    font-size:1.2rem;
    padding:12px;
    flex:1 1 130px;
    min-width:120px;
    border-radius:16px;
    border:2px solid #999;
    background: var(--metal-gradient);
    box-shadow: 2px 2px 5px rgba(0,0,0,0.2) inset;
}
input[type="number"] { min:1; step:1; } 
button {
    font-size:1.2rem;
    padding:16px 20px;
    cursor:pointer;
    border:none;
    background: var(--accent-gradient);
    color:#222;
    border-radius:16px;
    flex:1 1 130px;
    min-width:120px;
    transition: transform 0.15s, box-shadow 0.15s;
    box-shadow: 2px 2px 6px rgba(0,0,0,0.3);
}
button:hover { transform:scale(1.05); box-shadow: 3px 3px 8px rgba(0,0,0,0.4); }
.feedback { margin-top:10px; font-weight:bold; font-size:1.2rem; text-align:center; min-height:1.5em; }
.stats { margin-top:8px; display:flex; flex-wrap:wrap; justify-content:space-between; font-size:1rem; }
#playerTiles { display:flex; flex-wrap:wrap; gap:10px; justify-content:center; margin-top:20px; }
.player-tile {
    flex:1 1 120px;
    min-width:100px;
    max-width:150px;
    padding:20px;
    border-radius:20px;
    background: linear-gradient(145deg, #ffffff, #d1d1d1, #a0a0a0);
    font-weight:bold;
    text-align:center;
    font-size:1.2rem;
    cursor:pointer;
    user-select:none;
    transition: transform 0.25s, box-shadow 0.25s;
    box-shadow: 2px 2px 8px rgba(0,0,0,0.3);
}
.player-tile.current { border:3px solid #ff9800; transform:scale(1.05); box-shadow: 3px 3px 10px rgba(0,0,0,0.4);}
.player-tile.winner { background:#4caf50; color:#fff; transform:scale(1.08); box-shadow: 3px 3px 12px rgba(0,0,0,0.5); }
table { width:100%; margin-top:15px; border-collapse: collapse; overflow-x:auto; display:block; border-radius:12px; }
th, td { border:2px solid #999; padding:10px; text-align:center; font-size:1rem; }
th { background: var(--accent-gradient); color:#222; }
tr.current-row { background: #ffd700; font-weight:bold; }
tr.winner-row { background: #4caf50; color:#fff; font-weight:bold; }
@media(max-width:500px){
    input[type="number"], input[type="text"], select, button {
        font-size:1rem;
        padding:12px;
        min-width:100px;
    }
    .player-tile {
        font-size:1rem;
        padding:16px;
        min-width:90px;
    }
    table th, table td { font-size:0.9rem; padding:8px; }
}
</style>
</head>
<body>

<header>
<h1>Eska's Multiplayer Guessing Game</h1>
</header>

<div class="container">

<input type="text" id="playerNames" placeholder="Enter player names, e.g. Alice,Bob,Charlie">
<select id="difficulty">
    <option value="10">Easy (1-10)</option>
    <option value="50">Medium (1-50)</option>
    <option value="100">Hard (1-100)</option>
</select>

<div class="input-row">
    <button id="startBtn" style="flex:1 1 48%;">Start Game</button>
    <button id="restartBtn" style="flex:1 1 48%;">Restart Game</button>
</div>

<div id="playerTiles"></div>

<div class="input-row">
    <input type="number" id="guessInput" placeholder="Your guess">
    <button id="guessBtn">Guess</button>
</div>

<div class="feedback" id="feedback"></div>

<div class="stats">
    <span id="attempts">Attempts: 0</span>
    <span id="timer">Time: 0s</span>
</div>

<table id="scoreboard">
<thead>
<tr><th>No.</th><th>Player</th><th>Difficulty</th><th>Attempts</th><th>Time(s)</th></tr>
</thead>
<tbody></tbody>
</table>

</div>

<script>
let attempts, timerInterval, secondsElapsed, maxNumber;
let players=[], currentPlayerIndex=0, scores=[], winnerDeclared=false;
let playerSecrets={}, playerAttempts={};

const playerNamesInput = document.getElementById("playerNames");
const guessInput = document.getElementById("guessInput");
const guessBtn = document.getElementById("guessBtn");
const startBtn = document.getElementById("startBtn");
const restartBtn = document.getElementById("restartBtn");
const feedback = document.getElementById("feedback");
const attemptsSpan = document.getElementById("attempts");
const timerSpan = document.getElementById("timer");
const difficultySelect = document.getElementById("difficulty");
const scoreboardBody = document.querySelector("#scoreboard tbody");
const playerTilesDiv = document.getElementById("playerTiles");

function initializePlayers() {
    const names = playerNamesInput.value.split(',').map(n=>n.trim()).filter(n=>n);
    if(names.length<1){ alert("Enter at least 1 player!"); return false; }
    players = names;
    playerNamesInput.disabled = true;
    difficultySelect.disabled = true;

    maxNumber = parseInt(difficultySelect.value);
    players.forEach(p=>{
        playerSecrets[p]=Math.floor(Math.random()*maxNumber)+1;
        playerAttempts[p]=0;
    });
    return true;
}

function startRound(){
    if(players.length===0 && !initializePlayers()) return;

    currentPlayerIndex=0;
    winnerDeclared=false;
    attempts=0;
    secondsElapsed=0;

    feedback.textContent=`${players[currentPlayerIndex]}'s turn!`;
    attemptsSpan.textContent="Attempts: 0";
    timerSpan.textContent="Time: 0s";
    guessInput.value="";

    clearInterval(timerInterval);
    timerInterval=setInterval(()=>{ secondsElapsed++; timerSpan.textContent="Time: "+secondsElapsed+"s"; },1000);

    renderPlayerTiles();
    updateScoreboard();
}

function renderPlayerTiles(){
    playerTilesDiv.innerHTML="";
    players.forEach((p,i)=>{
        const div=document.createElement("div");
        div.className="player-tile"+(i===currentPlayerIndex?" current":"");
        div.textContent=p;
        if(playerSecrets[p]===0) div.classList.add("winner");
        div.addEventListener("click",()=>{ 
            // allow selection only if player is current and unfinished
            if(i!==currentPlayerIndex || playerSecrets[p]===0) return;
            document.querySelector(".player-tile.current")?.classList.remove("current");
            div.classList.add("current");
        });
        playerTilesDiv.appendChild(div);
    });
}

startBtn.addEventListener("click", startRound);

restartBtn.addEventListener("click", ()=>{
    clearInterval(timerInterval);
    attempts=0;
    secondsElapsed=0;
    winnerDeclared=false;
    players=[];
    scores=[];
    playerSecrets={};
    playerAttempts={};
    currentPlayerIndex=0;
    playerNamesInput.disabled=false;
    difficultySelect.disabled=false;
    playerNamesInput.value="";
    feedback.textContent="";
    attemptsSpan.textContent="Attempts: 0";
    timerSpan.textContent="Time: 0s";
    playerTilesDiv.innerHTML="";
    scoreboardBody.innerHTML="";
});

guessBtn.addEventListener("click",()=>{
    if(players.length===0){ alert("Click Start Game first!"); return; }
    const currentPlayer = players[currentPlayerIndex];
    if(playerSecrets[currentPlayer]===0){ 
        feedback.textContent = `${currentPlayer} already finished!`;
        return; 
    }

    const guess=parseInt(guessInput.value.trim());
    if(isNaN(guess)||guess<1||guess>maxNumber){
        feedback.textContent=`âŒ Enter a number between 1 and ${maxNumber}!`;
        feedback.style.color="red";
        return;
    }

    playerAttempts[currentPlayer]++;
    attemptsSpan.textContent="Attempts: "+playerAttempts[currentPlayer];

    if(guess===playerSecrets[currentPlayer]){
        feedback.textContent=`ðŸŽ‰ ${currentPlayer} guessed correctly!`;
        feedback.style.color="green";
        scores.push({
            player: currentPlayer,
            difficulty: difficultySelect.options[difficultySelect.selectedIndex].text,
            attempts: playerAttempts[currentPlayer],
            time: secondsElapsed
        });
        playerSecrets[currentPlayer]=0; // mark finished

        // move to next unfinished player
        if(players.every(p => playerSecrets[p]===0)){
            clearInterval(timerInterval);
            feedback.textContent="âœ… All players finished! Click Start Game to play again.";
        } else {
            do {
                currentPlayerIndex = (currentPlayerIndex+1)%players.length;
            } while(playerSecrets[players[currentPlayerIndex]]===0);
            feedback.textContent=`${players[currentPlayerIndex]}'s turn!`;
        }
    } else {
        feedback.textContent=guess<playerSecrets[currentPlayer]?"Higher!":"Lower!";
        feedback.style.color="#ff5722";
    }

    renderPlayerTiles();
    updateScoreboard();
    guessInput.value="";
    guessInput.focus();
});

function updateScoreboard(){
    scoreboardBody.innerHTML="";
    scores.forEach((s,i)=>{
        const tr=document.createElement("tr");
        tr.innerHTML=`<td>${i+1}</td><td>${s.player}</td><td>${s.difficulty}</td><td>${s.attempts}</td><td>${s.time}</td>`;
        if(players[currentPlayerIndex]===s.player && playerSecrets[s.player]!==0) tr.classList.add("current-row");
        if(playerSecrets[s.player]===0) tr.classList.add("winner-row");
        scoreboardBody.appendChild(tr);
    });
}
</script>
</body>
</html>
