<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ultimate Multiplayer Guessing Game</title>
<style>
:root {
    --bg-light: #f5f5f5;
    --bg-dark: #222;
    --text-light: #000;
    --text-dark: #fff;
    --accent: #3f51b5;
    --correct: #4caf50;
    --wrong: #ff9800;
}
body {
    margin:0;
    font-family: 'Segoe UI', sans-serif;
    background-color: var(--bg-light);
    color: var(--text-light);
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 100vh;
    transition: background-color 0.3s, color 0.3s;
}
header {
    text-align:center;
    padding:20px;
    background-color: var(--accent);
    color:#fff;
    width:100%;
}
h1 { margin:0; font-size:1.8rem; }
.container {
    padding:15px;
    max-width:480px;
    width:95%;
}
.input-row {
    margin-top:10px;
    display:flex;
    flex-wrap:wrap;
    gap:10px;
    justify-content:center;
}
input[type="number"], input[type="text"], select {
    font-size:1rem;
    padding:10px;
    flex:1 1 120px;
    min-width:100px;
    border-radius:4px;
    border:1px solid #999;
}
button {
    font-size:1rem;
    padding:10px 15px;
    cursor:pointer;
    border:none;
    background-color: var(--accent);
    color:#fff;
    border-radius:6px;
    flex:1 1 100px;
    min-width:100px;
}
button:hover { opacity:0.85; }
.feedback {
    margin-top:10px;
    font-weight:bold;
    font-size:1.1rem;
    text-align:center;
    min-height:1.5em;
    word-wrap: break-word;
}
.stats {
    margin-top:10px;
    display:flex;
    flex-wrap:wrap;
    justify-content:space-between;
    font-size:0.9rem;
}
table {
    width:100%;
    margin-top:15px;
    border-collapse: collapse;
    overflow-x:auto;
    display:block;
}
th, td {
    border:1px solid #999;
    padding:5px;
    text-align:center;
}
th { background-color: var(--accent); color:#fff; }
.current { background-color: #ffd54f; }
.dark { background-color: var(--bg-dark); color: var(--text-dark); }
.dark th { background-color: var(--accent); }
</style>
</head>
<body>

<header>
<h1>üéØ Eska's Ultimate Multiplayer Guessing Game</h1>
</header>

<div class="container">

<label for="playerNames">Enter Player Names (comma separated):</label>
<input type="text" id="playerNames" placeholder="e.g. Alice,Bob,Charlie">

<label for="difficulty">Select Difficulty:</label>
<select id="difficulty">
    <option value="10">Easy (1-10)</option>
    <option value="50">Medium (1-50)</option>
    <option value="100">Hard (1-100)</option>
</select>

<div class="input-row">
    <input type="number" id="guessInput" placeholder="Your guess" min="1">
    <button id="guessBtn">Guess</button>
</div>

<div class="feedback" id="feedback"></div>

<div class="stats">
    <span id="playerTurn">Current Player: </span>
    <span id="attempts">Attempts: 0</span>
    <span id="timer">Time: 0s</span>
</div>

<div class="input-row" style="margin-top:10px;">
    <button id="playAgainBtn">Play Again</button>
    <button id="toggleDarkBtn">Toggle Dark Mode</button>
    <button id="shareBtn">Share on WhatsApp</button>
</div>

<table id="scoreboard">
<thead>
<tr><th>No.</th><th>Player</th><th>Difficulty</th><th>Attempts</th><th>Time(s)</th></tr>
</thead>
<tbody></tbody>
</table>

</div>

<script>
let secretNumber, attempts, timerInterval, secondsElapsed, maxNumber;
let players = [];
let currentPlayerIndex = 0;
let scores = [];

const playerNamesInput = document.getElementById("playerNames");
const guessInput = document.getElementById("guessInput");
const guessBtn = document.getElementById("guessBtn");
const feedback = document.getElementById("feedback");
const attemptsSpan = document.getElementById("attempts");
const timerSpan = document.getElementById("timer");
const difficultySelect = document.getElementById("difficulty");
const playAgainBtn = document.getElementById("playAgainBtn");
const toggleDarkBtn = document.getElementById("toggleDarkBtn");
const shareBtn = document.getElementById("shareBtn");
const scoreboardBody = document.querySelector("#scoreboard tbody");
const playerTurnSpan = document.getElementById("playerTurn");

function startGame() {
    const names = playerNamesInput.value.split(',').map(n => n.trim()).filter(n => n);
    if(names.length < 1) { alert("Please enter at least one player name!"); return; }
    players = names;
    currentPlayerIndex = 0;

    maxNumber = parseInt(difficultySelect.value);
    secretNumber = Math.floor(Math.random() * maxNumber) + 1;
    guessInput.max = maxNumber;

    attempts = 0;
    secondsElapsed = 0;

    feedback.textContent = "Start guessing!";
    attemptsSpan.textContent = "Attempts: 0";
    timerSpan.textContent = "Time: 0s";
    playerTurnSpan.textContent = `Current Player: ${players[currentPlayerIndex]}`;
    guessInput.value = "";

    clearInterval(timerInterval);
    timerInterval = setInterval(() => {
        secondsElapsed++;
        timerSpan.textContent = "Time: " + secondsElapsed + "s";
    }, 1000);

    updateScoreboard();
}
playAgainBtn.addEventListener("click", startGame);

guessBtn.addEventListener("click", () => {
    if(players.length === 0) { alert("Please start the game with player names!"); return; }

    const guess = parseInt(guessInput.value.trim());
    if(isNaN(guess) || guess < 1 || guess > maxNumber) {
        feedback.textContent = `‚ùå Enter a number between 1 and ${maxNumber}!`;
        feedback.style.color = "red";
        return;
    }

    attempts++;
    attemptsSpan.textContent = "Attempts: " + attempts;

    const currentPlayer = players[currentPlayerIndex];

    if(guess === secretNumber) {
        feedback.textContent = `üéâ ${currentPlayer} guessed correctly!`;
        feedback.style.color = "green";

        scores.push({
            player: currentPlayer,
            difficulty: difficultySelect.options[difficultySelect.selectedIndex].text,
            attempts,
            time: secondsElapsed
        });

        clearInterval(timerInterval);
    } else if(guess < secretNumber) {
        feedback.textContent = "Higher!";
        feedback.style.color = "#ff9800";
    } else {
        feedback.textContent = "Lower!";
        feedback.style.color = "#ff9800";
    }

    // Switch player
    currentPlayerIndex = (currentPlayerIndex + 1) % players.length;
    playerTurnSpan.textContent = `Current Player: ${players[currentPlayerIndex]}`;

    guessInput.value = "";
    guessInput.focus();

    updateScoreboard();
});

toggleDarkBtn.addEventListener("click", () => { document.body.classList.toggle("dark"); });

// Share results on WhatsApp
shareBtn.addEventListener("click", () => {
    if(scores.length === 0) { alert("No scores to share yet!"); return; }
    let message = "üéØ Ultimate Multiplayer Guessing Game Scores:\n";
    scores.forEach((s,i)=>{
        message += `${i+1}. ${s.player} | ${s.difficulty} | Attempts: ${s.attempts} | Time: ${s.time}s\n`;
    });
    const whatsappURL = `https://wa.me/?text=${encodeURIComponent(message)}`;
    window.open(whatsappURL, "_blank");
});

function updateScoreboard() {
    scoreboardBody.innerHTML = "";
    players.forEach((p,i)=>{
        const tr = document.createElement("tr");
        const playerScore = scores.find(s => s.player === p);
        tr.innerHTML = `<td>${i+1}</td>
                        <td>${p}</td>
                        <td>${playerScore ? playerScore.difficulty : '-'}</td>
                        <td>${playerScore ? playerScore.attempts : '-'}</td>
                        <td>${playerScore ? playerScore.time : '-'}</td>`;
        if(i === currentPlayerIndex) tr.classList.add("current");
        scoreboardBody.appendChild(tr);
    });
}
</script>

</body>
</html>
