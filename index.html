<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Eska Multiplayer Guessing Game</title>
<style>
:root {
    --bg-light: #e0e0e0;
    --text-light: #222;
    --metal-gradient: linear-gradient(145deg, #ffffff, #d1d1d1, #a0a0a0);
    --correct: #4caf50;
    --wrong: #ff5722;
}
body {
    margin:0;
    font-family: 'Segoe UI', sans-serif;
    background-color: var(--bg-light);
    color: var(--text-light);
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 100vh;
}
header {
    text-align:center;
    padding:25px;
    background: linear-gradient(145deg, #ffffff, #c0c0c0, #e0e0e0);
    color:#222;
    width:100%;
    box-shadow: 0 4px 12px rgba(0,0,0,0.4);
    border-bottom:2px solid #999;
}
h1 { margin:0; font-size:2rem; text-shadow: 1px 1px 2px #999; }
.container { padding:20px; max-width:550px; width:95%; }
.input-row { margin-top:15px; display:flex; flex-wrap:wrap; gap:15px; justify-content:center; }
input[type="number"], input[type="text"], select {
    font-size:1.3rem;
    padding:14px;
    flex:1 1 150px;
    min-width:130px;
    border-radius:16px;
    border:2px solid #999;
    background: var(--metal-gradient);
    box-shadow: 2px 2px 5px rgba(0,0,0,0.2) inset;
}
input[type="number"] { min:1; step:1; } 
button {
    font-size:1.3rem;
    padding:18px 25px;
    cursor:pointer;
    border:none;
    background: var(--metal-gradient);
    color:#222;
    border-radius:18px;
    flex:1 1 140px;
    min-width:140px;
    transition: transform 0.15s, box-shadow 0.15s;
    box-shadow: 2px 2px 6px rgba(0,0,0,0.3);
}
button:hover { transform:scale(1.07); box-shadow: 3px 3px 8px rgba(0,0,0,0.4); }
.feedback { margin-top:15px; font-weight:bold; font-size:1.4rem; text-align:center; min-height:1.5em; }
.stats { margin-top:12px; display:flex; flex-wrap:wrap; justify-content:space-between; font-size:1.1rem; }
#playerTiles { display:flex; flex-wrap:wrap; gap:15px; justify-content:center; margin-top:25px; }
.player-tile {
    flex:1 1 130px;
    min-width:120px;
    max-width:160px;
    padding:25px;
    border-radius:24px;
    background: linear-gradient(145deg, #ffffff, #d1d1d1, #a0a0a0);
    font-weight:bold;
    text-align:center;
    font-size:1.3rem;
    cursor:pointer;
    user-select:none;
    transition: transform 0.25s, box-shadow 0.25s;
    box-shadow: 2px 2px 8px rgba(0,0,0,0.3);
}
.player-tile.current { border:4px solid #999; transform:scale(1.08); box-shadow: 3px 3px 10px rgba(0,0,0,0.4);}
.player-tile.winner { background:#4caf50; color:#fff; transform:scale(1.12); box-shadow: 3px 3px 12px rgba(0,0,0,0.5); }
table { width:100%; margin-top:20px; border-collapse: collapse; overflow-x:auto; display:block; border-radius:12px; }
th, td { border:2px solid #999; padding:14px; text-align:center; font-size:1.1rem; }
th { background: linear-gradient(145deg, #c0c0c0, #e0e0e0, #b0b0b0); color:#222; }
tr.current-row { background: #ddd; font-weight:bold; }
tr.winner-row { background: #4caf50; color:#fff; font-weight:bold; }
</style>
</head>
<body>

<header>
<h1>Eska's Multiplayer Guessing Game</h1>
</header>

<div class="container">

<input type="text" id="playerNames" placeholder="Enter player names, e.g. Alice,Bob,Charlie">
<select id="difficulty">
    <option value="10">Easy (1-10)</option>
    <option value="50">Medium (1-50)</option>
    <option value="100">Hard (1-100)</option>
</select>

<div class="input-row">
    <button id="startBtn" style="flex:1 1 48%;">Start Game</button>
    <button id="restartBtn" style="flex:1 1 48%;">Restart Game</button>
</div>

<div id="playerTiles"></div>

<div class="input-row">
    <input type="number" id="guessInput" placeholder="Your guess">
    <button id="guessBtn">Guess</button>
</div>

<div class="feedback" id="feedback"></div>

<div class="stats">
    <span id="attempts">Attempts: 0</span>
    <span id="timer">Time: 0s</span>
</div>

<table id="scoreboard">
<thead>
<tr><th>No.</th><th>Player</th><th>Difficulty</th><th>Attempts</th><th>Time(s)</th></tr>
</thead>
<tbody></tbody>
</table>

</div>

<script>
let secretNumber, attempts, timerInterval, secondsElapsed, maxNumber;
let players=[], currentPlayerIndex=0, scores=[], winnerDeclared=false;

const playerNamesInput = document.getElementById("playerNames");
const guessInput = document.getElementById("guessInput");
const guessBtn = document.getElementById("guessBtn");
const startBtn = document.getElementById("startBtn");
const restartBtn = document.getElementById("restartBtn");
const feedback = document.getElementById("feedback");
const attemptsSpan = document.getElementById("attempts");
const timerSpan = document.getElementById("timer");
const difficultySelect = document.getElementById("difficulty");
const scoreboardBody = document.querySelector("#scoreboard tbody");
const playerTilesDiv = document.getElementById("playerTiles");

function initializePlayers() {
    const names = playerNamesInput.value.split(',').map(n=>n.trim()).filter(n=>n);
    if(names.length<1){ alert("Enter at least 1 player!"); return false; }
    players = names;
    playerNamesInput.disabled = true;
    difficultySelect.disabled = true;
    return true;
}

function startRound(){
    if(players.length===0 && !initializePlayers()) return;

    currentPlayerIndex=0;
    winnerDeclared=false;

    maxNumber=parseInt(difficultySelect.value);
    secretNumber=Math.floor(Math.random()*maxNumber)+1;

    attempts=0;
    secondsElapsed=0;

    feedback.textContent=`${players[currentPlayerIndex]}'s turn!`;
    attemptsSpan.textContent="Attempts: 0";
    timerSpan.textContent="Time: 0s";
    guessInput.value="";

    clearInterval(timerInterval);
    timerInterval=setInterval(()=>{ secondsElapsed++; timerSpan.textContent="Time: "+secondsElapsed+"s"; },1000);

    renderPlayerTiles();
    updateScoreboard();
}

function renderPlayerTiles(){
    playerTilesDiv.innerHTML="";
    players.forEach((p,i)=>{
        const div=document.createElement("div");
        div.className="player-tile"+(i===currentPlayerIndex?" current":"");
        div.textContent=p;
        div.addEventListener("click",()=>{ 
            if(winnerDeclared) return;
            document.querySelector(".player-tile.current")?.classList.remove("current");
            div.classList.add("current");
            currentPlayerIndex=i;
            feedback.textContent=`${players[currentPlayerIndex]}'s turn!`;
            updateScoreboard();
        });
        playerTilesDiv.appendChild(div);
    });
}

startBtn.addEventListener("click", startRound);

restartBtn.addEventListener("click", ()=>{
    clearInterval(timerInterval);
    secretNumber=0;
    attempts=0;
    secondsElapsed=0;
    winnerDeclared=false;
    players=[];
    scores=[];
    currentPlayerIndex=0;
    playerNamesInput.disabled=false;
    difficultySelect.disabled=false;
    playerNamesInput.value="";
    feedback.textContent="";
    attemptsSpan.textContent="Attempts: 0";
    timerSpan.textContent="Time: 0s";
    playerTilesDiv.innerHTML="";
    scoreboardBody.innerHTML="";
});

guessBtn.addEventListener("click",()=>{
    if(players.length===0){ alert("Click Start Game first!"); return; }
    if(winnerDeclared){ alert("Round over! Click Start to start a new round."); return; }

    const guess=parseInt(guessInput.value.trim());
    if(isNaN(guess)||guess<1||guess>maxNumber){
        feedback.textContent=`‚ùå Enter a number between 1 and ${maxNumber}!`;
        feedback.style.color="red";
        return;
    }

    attempts++;
    attemptsSpan.textContent="Attempts: "+attempts;
    const currentPlayer = players[currentPlayerIndex];

    if(guess===secretNumber){
        feedback.textContent=`üéâ ${currentPlayer} guessed correctly!`;
        feedback.style.color="green";
        scores.push({player:currentPlayer,difficulty:difficultySelect.options[difficultySelect.selectedIndex].text,attempts,time:secondsElapsed});
        winnerDeclared=true;
        document.querySelectorAll(".player-tile")[currentPlayerIndex].classList.add("winner");
        clearInterval(timerInterval);
    } else {
        feedback.textContent=guess<secretNumber?"Higher!":"Lower!";
        feedback.style.color="#ff5722";
        currentPlayerIndex=(currentPlayerIndex+1)%players.length;
        renderPlayerTiles();
        feedback.textContent=`${players[currentPlayerIndex]}'s turn!`;
    }

    guessInput.value="";
    guessInput.focus();
    updateScoreboard();
});

function updateScoreboard(){
    scoreboardBody.innerHTML="";
    scores.forEach((s,i)=>{
        const tr=document.createElement("tr");
        tr.innerHTML=`<td>${i+1}</td><td>${s.player}</td><td>${s.difficulty}</td><td>${s.attempts}</td><td>${s.time}</td>`;
        if(!winnerDeclared && s.player===players[currentPlayerIndex]) tr.classList.add("current-row");
        if(winnerDeclared && s.player===players[currentPlayerIndex]) tr.classList.add("winner-row");
        scoreboardBody.appendChild(tr);
    });
}
</script>
</body>
</html>
