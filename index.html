<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Eska's Multiplayer Guessing Numbers Game</title>
<style>
:root {
    --bg-light: #e6e6e6;
    --text-color: #222;
    --metal-gradient: linear-gradient(145deg, #ffffff, #cfd1d3, #a8a8ab);
    --button-gradient: linear-gradient(145deg, #d1d3d6, #a9abb0);
    --tile-bg: linear-gradient(145deg, #f0f0f0, #c8c8c8, #a0a0a0);
    --tile-current-border: #1e90ff;
    --correct: #4caf50;
    --wrong: #ff7043;
    --shadow: rgba(0,0,0,0.25);
}
body {
    margin:0;
    font-family: 'Segoe UI', sans-serif;
    background-color: var(--bg-light);
    color: var(--text-color);
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 100vh;
}
header {
    text-align:center;
    padding:20px;
    background: var(--metal-gradient);
    color:#222;
    width:100%;
    box-shadow: 0 6px 14px var(--shadow);
    border-bottom:2px solid #999;
    animation: shine 4s linear infinite;
}
h1 { margin:0; font-size:2rem; font-weight:bold; text-shadow: 1px 1px 2px #aaa; }
.container { padding:20px; width:95%; max-width:600px; }
.input-row { margin-top:15px; display:flex; flex-wrap:wrap; gap:12px; justify-content:center; }
input[type="number"], input[type="text"], select {
    font-size:1.5rem;
    padding:18px;
    flex:1 1 160px;
    min-width:140px;
    border-radius:20px;
    border:2px solid #999;
    background: var(--metal-gradient);
    box-shadow: 3px 3px 6px var(--shadow) inset;
    animation: shine 6s linear infinite;
}
input[type="number"] { min:1; step:1; } 
button {
    font-size:1.5rem;
    padding:22px 26px;
    cursor:pointer;
    border:none;
    background: var(--button-gradient);
    color:#222;
    border-radius:20px;
    flex:1 1 160px;
    min-width:140px;
    font-weight:bold;
    transition: transform 0.2s, box-shadow 0.2s;
    box-shadow: 3px 3px 10px var(--shadow);
    animation: shine 5s linear infinite;
}
button:hover { transform:scale(1.08); box-shadow: 4px 4px 14px var(--shadow); }
.feedback { margin-top:12px; font-weight:bold; font-size:1.4rem; text-align:center; min-height:1.5em; }
.stats { margin-top:12px; display:flex; flex-wrap:wrap; justify-content:space-between; font-size:1.2rem; }
#playerTiles { display:flex; flex-wrap:wrap; gap:14px; justify-content:center; margin-top:25px; }
.player-tile {
    flex:1 1 140px;
    min-width:120px;
    max-width:180px;
    padding:28px;
    border-radius:24px;
    background: var(--tile-bg);
    font-weight:bold;
    text-align:center;
    font-size:1.3rem;
    cursor:pointer;
    user-select:none;
    transition: transform 0.3s, box-shadow 0.3s, border 0.3s, background 0.3s;
    box-shadow: 3px 3px 14px var(--shadow);
    animation: shine 6s linear infinite;
}
.player-tile.current { 
    border:4px solid var(--tile-current-border); 
    transform:scale(1.08);
    box-shadow: 0 0 18px #1e90ff, 3px 3px 14px var(--shadow);
}
.player-tile.winner { background: var(--correct); color:#fff; transform:scale(1.08); box-shadow: 4px 4px 16px var(--shadow);}
.player-tile.flash {
    animation: flash 0.8s ease-in-out;
}
@keyframes glow {
    0% { box-shadow: 0 0 8px #1e90ff, 3px 3px 14px var(--shadow); }
    100% { box-shadow: 0 0 24px #1e90ff, 3px 3px 14px var(--shadow); }
}
@keyframes flash {
    0%,100% { transform: scale(1.1); background: #cfd1d3; }
    50% { transform: scale(1.2); background: #ffffff; }
}
@keyframes shine {
    0% { background-position:0% 50%; }
    50% { background-position:100% 50%; }
    100% { background-position:0% 50%; }
}
table { width:100%; margin-top:20px; border-collapse: collapse; overflow-x:auto; display:block; border-radius:14px; }
th, td { border:1px solid #999; padding:14px; text-align:center; font-size:1.1rem; }
th { background: linear-gradient(145deg, #d4d4d4, #a8a8a8); color:#222; font-weight:bold; }
tr.current-row { background: #d0ebff; font-weight:bold; }
tr.winner-row { background: var(--correct); color:#fff; font-weight:bold; }
@media(max-width:500px){
    input[type="number"], input[type="text"], select, button { font-size:1.3rem; padding:16px; min-width:120px; }
    .player-tile { font-size:1.2rem; padding:24px; min-width:100px; }
    table th, table td { font-size:1rem; padding:10px; }
}
</style>
</head>
<body>

<header>
<h1>Eska's Multiplayer Guessing Numbers Game</h1>
</header>

<div class="container">
<input type="text" id="playerNames" placeholder="Enter player with commas">
<select id="difficulty">
    <option value="10">Easy (1-10)</option>
    <option value="50">Medium (1-50)</option>
    <option value="100">Hard (1-100)</option>
</select>

<div class="input-row">
    <button id="startBtn" style="flex:1 1 48%;">Start Game</button>
    <button id="restartBtn" style="flex:1 1 48%;">Restart Game</button>
</div>

<div id="playerTiles"></div>

<div class="input-row">
    <input type="number" id="guessInput" placeholder="Your guess">
    <button id="guessBtn">Guess</button>
</div>

<div class="feedback" id="feedback"></div>

<div class="stats">
    <span id="attempts">Attempts: 0</span>
    <span id="timer">Time: 0s</span>
</div>

<table id="scoreboard">
<thead>
<tr><th>No.</th><th>Player</th><th>Difficulty</th><th>Attempts</th><th>Time(s)</th></tr>
</thead>
<tbody></tbody>
</table>

</div>

<script>
let attempts, timerInterval, secondsElapsed, maxNumber;
let players=[], currentPlayerIndex=0, scores=[], winnerDeclared=false;
let playerSecrets={}, playerAttempts={};

// HTML elements
const playerNamesInput = document.getElementById("playerNames");
const guessInput = document.getElementById("guessInput");
const guessBtn = document.getElementById("guessBtn");
const startBtn = document.getElementById("startBtn");
const restartBtn = document.getElementById("restartBtn");
const feedback = document.getElementById("feedback");
const attemptsSpan = document.getElementById("attempts");
const timerSpan = document.getElementById("timer");
const difficultySelect = document.getElementById("difficulty");
const scoreboardBody = document.querySelector("#scoreboard tbody");
const playerTilesDiv = document.getElementById("playerTiles");

// initialize players
function initializePlayers() {
    const names = playerNamesInput.value.split(',').map(n=>n.trim()).filter(n=>n);
    if(names.length<1){ alert("Enter at least 1 player!"); return false; }
    players = names;
    playerNamesInput.disabled = true;
    difficultySelect.disabled = true;
    maxNumber = parseInt(difficultySelect.value);
    players.forEach(p=>{
        playerSecrets[p]=Math.floor(Math.random()*maxNumber)+1;
        playerAttempts[p]=0;
    });
    return true;
}

// start round / rollover
function startRound(){
    if(players.length===0 && !initializePlayers()) return;

    currentPlayerIndex=0;
    attempts=0;
    secondsElapsed=0;

    feedback.textContent=`${players[currentPlayerIndex]}'s turn!`;
    attemptsSpan.textContent="Attempts: 0";
    timerSpan.textContent="Time: 0s";
    guessInput.value="";

    clearInterval(timerInterval);
    timerInterval=setInterval(()=>{ secondsElapsed++; timerSpan.textContent="Time: "+secondsElapsed+"s"; },1000);

    // reset secrets for rollover if round completed
    players.forEach(p=>{
        if(playerSecrets[p]===0) playerSecrets[p]=Math.floor(Math.random()*maxNumber)+1;
        playerAttempts[p]=0;
    });

    renderPlayerTiles(true);
    updateScoreboard();
}

// render tiles
function renderPlayerTiles(flash=false){
    playerTilesDiv.innerHTML="";
    players.forEach((p,i)=>{
        const div=document.createElement("div");
        div.className="player-tile"+(i===currentPlayerIndex?" current":"");
        div.textContent=p;
        if(flash && i===currentPlayerIndex) {
            div.classList.add("flash");
            setTimeout(()=>div.classList.remove("flash"),800);
        }
        div.addEventListener("click",()=>{ 
            if(i!==currentPlayerIndex) return;
            document.querySelector(".player-tile.current")?.classList.remove("current");
            div.classList.add("current");
        });
        playerTilesDiv.appendChild(div);
    });
}

// start and restart
startBtn.addEventListener("click", ()=>startRound());
restartBtn.addEventListener("click", ()=>{
    clearInterval(timerInterval);
    attempts=0; secondsElapsed=0; winnerDeclared=false;
    players=[]; scores=[]; playerSecrets={}; playerAttempts={}; currentPlayerIndex=0;
    playerNamesInput.disabled=false; difficultySelect.disabled=false; playerNamesInput.value="";
    feedback.textContent=""; attemptsSpan.textContent="Attempts: 0"; timerSpan.textContent="Time: 0s";
    playerTilesDiv.innerHTML=""; scoreboardBody.innerHTML="";
});

// guessing
guessBtn.addEventListener("click",()=>{
    if(players.length===0){ alert("Click Start Game first!"); return; }
    const currentPlayer = players[currentPlayerIndex];
    const guess=parseInt(guessInput.value.trim());
    if(isNaN(guess)||guess<1||guess>maxNumber){
        feedback.textContent=`‚ùå Enter a number between 1 and ${maxNumber}!`;
        feedback.style.color="red";
        return;
    }

    playerAttempts[currentPlayer]++;
    attemptsSpan.textContent="Attempts: "+playerAttempts[currentPlayer];

    if(guess===playerSecrets[currentPlayer]){
        feedback.textContent=`üéâ ${currentPlayer} guessed correctly!`;
        feedback.style.color="green";
        scores.push({
            player: currentPlayer,
            difficulty: difficultySelect.options[difficultySelect.selectedIndex].text,
            attempts: playerAttempts[currentPlayer],
            time: secondsElapsed
        });
        playerSecrets[currentPlayer]=0;

        // move to next player who hasn't finished
        do { currentPlayerIndex = (currentPlayerIndex+1)%players.length; } while(playerSecrets[players[currentPlayerIndex]]===0);

        feedback.textContent=`${players[currentPlayerIndex]}'s turn!`;

        // flash tile on new round
        renderPlayerTiles(true);
    } else {
        feedback.textContent=guess<playerSecrets[currentPlayer]?"Higher!":"Lower!";
        feedback.style.color="var(--wrong)";
        renderPlayerTiles();
    }

    updateScoreboard();
    guessInput.value="";
    guessInput.focus();
});

// update scoreboard
function updateScoreboard(){
    scoreboardBody.innerHTML="";
    scores.forEach((s,i)=>{
        const tr=document.createElement("tr");
        tr.innerHTML=`<td>${i+1}</td><td>${s.player}</td><td>${s.difficulty}</td><td>${s.attempts}</td><td>${s.time}</td>`;
        if(players[currentPlayerIndex]===s.player && playerSecrets[s.player]!==0) tr.classList.add("current-row");
        if(playerSecrets[s.player]===0) tr.classList.add("winner-row");
        scoreboardBody.appendChild(tr);
    });
}
</script>
</body>
</html>
